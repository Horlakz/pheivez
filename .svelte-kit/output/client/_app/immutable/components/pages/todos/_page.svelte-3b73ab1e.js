import{P as K,S as ue,i as ce,s as de,k as y,a as U,q as fe,F as he,l as k,h as q,c as A,m as N,r as pe,n,C as f,b as Z,Q,R as _e,d as me,f as ve,t as ge,B as ae,T as be,U as ye,V as ke,W as we,X as ne,O as Ee,g as qe,Y as Te,A as Oe}from"../../../chunks/index-7b9ea8f7.js";import{i as re}from"../../../chunks/navigation-bfb6bd44.js";import{c as Ue}from"../../../chunks/singletons-97dbc110.js";const Ae=Ue.apply_action;function W(h,e=()=>{}){const t=async({action:s,result:p})=>{p.type==="success"&&await re(),location.origin+location.pathname===s.origin+s.pathname&&Ae(p)};async function a(s){var b,E;s.preventDefault();const p=new URL((b=s.submitter)!=null&&b.hasAttribute("formaction")?s.submitter.formAction:h.action),_=new FormData(h),i=new AbortController;let u=!1;const o=(E=e({action:p,cancel:()=>u=!0,controller:i,data:_,form:h}))!=null?E:t;if(u)return;let g;try{g=await(await fetch(p,{method:"POST",headers:{accept:"application/json"},body:_,signal:i.signal})).json()}catch(c){if((c==null?void 0:c.name)==="AbortError")return;g={type:"error",error:c}}o({action:p,data:_,form:h,result:g,get type(){throw new Error("(result) => {...} has changed to ({ result }) => {...}")},get location(){throw new Error("(result) => {...} has changed to ({ result }) => {...}")},get error(){throw new Error("(result) => {...} has changed to ({ result }) => {...}")}})}return h.addEventListener("submit",a),{destroy(){h.removeEventListener("submit",a)}}}function ie(h){const e=h-1;return e*e*e+1}function oe(h,{delay:e=0,duration:t=400,easing:a=ie,start:s=0,opacity:p=0}={}){const _=getComputedStyle(h),i=+_.opacity,u=_.transform==="none"?"":_.transform,m=1-s,o=i*(1-p);return{delay:e,duration:t,easing:a,css:(g,b)=>`
			transform: ${u} scale(${1-m*b});
			opacity: ${i-o*b}
		`}}function Me(h,{from:e,to:t},a={}){const s=getComputedStyle(h),p=s.transform==="none"?"":s.transform,[_,i]=s.transformOrigin.split(" ").map(parseFloat),u=e.left+e.width*_/t.width-(t.left+_),m=e.top+e.height*i/t.height-(t.top+i),{delay:o=0,duration:g=E=>Math.sqrt(E)*120,easing:b=ie}=a;return{delay:o,duration:K(g)?g(Math.sqrt(u*u+m*m)):g,easing:b,css:(E,c)=>{const w=c*u,P=c*m,r=E+c*e.width/t.width,l=E+c*e.height/t.height;return`transform: ${p} translate(${w}px, ${P}px) scale(${r}, ${l});`}}}function le(h,e,t){const a=h.slice();return a[5]=e[t],a[6]=e,a[7]=t,a}function se(h,e){let t,a,s,p,_,i,u,m,o,g,b,E,c,w,P,r,l,d,B,I,S,M,F,V,X,R,j,$,Y,C,z,G=Oe,O,J,x;function ee(...T){return e[3](e[5],e[6],e[7],...T)}function te(){return e[4](e[5],e[6],e[7])}return{key:h,first:null,c(){t=y("div"),a=y("form"),s=y("input"),_=U(),i=y("input"),m=U(),o=y("button"),E=U(),c=y("form"),w=y("input"),r=U(),l=y("input"),B=U(),I=y("button"),S=U(),M=y("form"),F=y("input"),X=U(),R=y("button"),Y=U(),this.h()},l(T){t=k(T,"DIV",{class:!0});var v=N(t);a=k(v,"FORM",{action:!0,method:!0});var D=N(a);s=k(D,"INPUT",{type:!0,name:!0,class:!0}),_=A(D),i=k(D,"INPUT",{type:!0,name:!0,class:!0}),m=A(D),o=k(D,"BUTTON",{class:!0,"aria-label":!0}),N(o).forEach(q),D.forEach(q),E=A(v),c=k(v,"FORM",{class:!0,action:!0,method:!0});var L=N(c);w=k(L,"INPUT",{type:!0,name:!0,class:!0}),r=A(L),l=k(L,"INPUT",{"aria-label":!0,type:!0,name:!0,class:!0}),B=A(L),I=k(L,"BUTTON",{class:!0,"aria-label":!0}),N(I).forEach(q),L.forEach(q),S=A(v),M=k(v,"FORM",{action:!0,method:!0});var H=N(M);F=k(H,"INPUT",{type:!0,name:!0,class:!0}),X=A(H),R=k(H,"BUTTON",{class:!0,"aria-label":!0}),N(R).forEach(q),H.forEach(q),Y=A(v),v.forEach(q),this.h()},h(){n(s,"type","hidden"),n(s,"name","uid"),s.value=p=e[5].uid,n(s,"class","svelte-q3kvo1"),n(i,"type","hidden"),n(i,"name","done"),i.value=u=e[5].done?"":"true",n(i,"class","svelte-q3kvo1"),n(o,"class","toggle svelte-q3kvo1"),n(o,"aria-label",g="Mark todo as "+(e[5].done?"not done":"done")),n(a,"action","/todos?/toggle"),n(a,"method","post"),n(w,"type","hidden"),n(w,"name","uid"),w.value=P=e[5].uid,n(w,"class","svelte-q3kvo1"),n(l,"aria-label","Edit todo"),n(l,"type","text"),n(l,"name","text"),l.value=d=e[5].text,n(l,"class","svelte-q3kvo1"),n(I,"class","save svelte-q3kvo1"),n(I,"aria-label","Save todo"),n(c,"class","text svelte-q3kvo1"),n(c,"action","/todos?/edit"),n(c,"method","post"),n(F,"type","hidden"),n(F,"name","uid"),F.value=V=e[5].uid,n(F,"class","svelte-q3kvo1"),n(R,"class","delete svelte-q3kvo1"),n(R,"aria-label","Delete todo"),R.disabled=j=e[5].pending_delete,n(M,"action","/todos?/delete"),n(M,"method","post"),n(t,"class","todo svelte-q3kvo1"),ae(t,"done",e[5].done),this.first=t},m(T,v){Z(T,t,v),f(t,a),f(a,s),f(a,_),f(a,i),f(a,m),f(a,o),f(t,E),f(t,c),f(c,w),f(c,r),f(c,l),f(c,B),f(c,I),f(t,S),f(t,M),f(M,F),f(M,X),f(M,R),f(t,Y),O=!0,J||(x=[Q(b=W.call(null,a,ee)),Q(W.call(null,c)),Q($=W.call(null,M,te))],J=!0)},p(T,v){e=T,(!O||v&1&&p!==(p=e[5].uid))&&(s.value=p),(!O||v&1&&u!==(u=e[5].done?"":"true"))&&(i.value=u),(!O||v&1&&g!==(g="Mark todo as "+(e[5].done?"not done":"done")))&&n(o,"aria-label",g),b&&K(b.update)&&v&1&&b.update.call(null,ee),(!O||v&1&&P!==(P=e[5].uid))&&(w.value=P),(!O||v&1&&d!==(d=e[5].text)&&l.value!==d)&&(l.value=d),(!O||v&1&&V!==(V=e[5].uid))&&(F.value=V),(!O||v&1&&j!==(j=e[5].pending_delete))&&(R.disabled=j),$&&K($.update)&&v&1&&$.update.call(null,te),(!O||v&1)&&ae(t,"done",e[5].done)},r(){z=t.getBoundingClientRect()},f(){be(t),G(),ye(t,z)},a(){G(),G=ke(t,z,Me,{duration:200})},i(T){O||(T&&we(()=>{C||(C=ne(t,oe,{start:.7},!0)),C.run(1)}),O=!0)},o(T){T&&(C||(C=ne(t,oe,{start:.7},!1)),C.run(0)),O=!1},d(T){T&&q(t),T&&C&&C.end(),J=!1,Ee(x)}}}function Ne(h){let e,t,a,s,p,_,i,u,m,o=[],g=new Map,b,E,c,w=h[0];const P=r=>r[5].uid;for(let r=0;r<w.length;r+=1){let l=le(h,w,r),d=P(l);g.set(d,o[r]=se(d,l))}return{c(){e=y("meta"),t=U(),a=y("div"),s=y("h1"),p=fe("Todos"),_=U(),i=y("form"),u=y("input"),m=U();for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){const l=he('[data-svelte="svelte-aw2gey"]',document.head);e=k(l,"META",{name:!0,content:!0}),l.forEach(q),t=A(r),a=k(r,"DIV",{class:!0});var d=N(a);s=k(d,"H1",{});var B=N(s);p=pe(B,"Todos"),B.forEach(q),_=A(d),i=k(d,"FORM",{class:!0,action:!0,method:!0});var I=N(i);u=k(I,"INPUT",{name:!0,"aria-label":!0,placeholder:!0,class:!0}),I.forEach(q),m=A(d);for(let S=0;S<o.length;S+=1)o[S].l(d);d.forEach(q),this.h()},h(){document.title="Todos",n(e,"name","description"),n(e,"content","A todo list app"),n(u,"name","text"),n(u,"aria-label","Add todo"),n(u,"placeholder","+ tap to add a todo"),n(u,"class","svelte-q3kvo1"),n(i,"class","new svelte-q3kvo1"),n(i,"action","/todos?/add"),n(i,"method","post"),n(a,"class","todos svelte-q3kvo1")},m(r,l){f(document.head,e),Z(r,t,l),Z(r,a,l),f(a,s),f(s,p),f(a,_),f(a,i),f(i,u),f(a,m);for(let d=0;d<o.length;d+=1)o[d].m(a,null);b=!0,E||(c=Q(W.call(null,i,h[2])),E=!0)},p(r,[l]){if(l&1){w=r[0],qe();for(let d=0;d<o.length;d+=1)o[d].r();o=_e(o,l,P,1,r,w,g,a,Te,se,null,le);for(let d=0;d<o.length;d+=1)o[d].a();me()}},i(r){if(!b){for(let l=0;l<w.length;l+=1)ve(o[l]);b=!0}},o(r){for(let l=0;l<o.length;l+=1)ge(o[l]);b=!1},d(r){q(e),r&&q(t),r&&q(a);for(let l=0;l<o.length;l+=1)o[l].d();E=!1,c()}}}function Pe(h,e,t){let a,{data:s}=e;const p=()=>({form:u,result:m})=>{m.type==="success"&&(u.reset(),re())},_=(u,m,o,{data:g})=>{t(0,m[o].done=!!g.get("done"),a)},i=(u,m,o)=>{t(0,m[o].pending_delete=!0,a)};return h.$$set=u=>{"data"in u&&t(1,s=u.data)},h.$$.update=()=>{h.$$.dirty&2&&t(0,a=s.todos)},[a,s,p,_,i]}class Ce extends ue{constructor(e){super(),ce(this,e,Pe,Ne,de,{data:1})}}export{Ce as default};
